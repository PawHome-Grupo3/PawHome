<!DOCTYPE html>
<html lang="es" xmlns:layout="https://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layouts/layout.html}">
<head>
	<title th:utext="#{page.guarderia.tittle}"></title>
	<link rel="stylesheet" th:href="@{/css/guarderia.css}"/>
</head>
<body>
<section layout:fragment="content">
	<section class="container py-5 mainContainer">

		<!-- Sección: Nuestra guardería -->
		<section class="text-center rounded-4 shadow mx-2 my-3 p-3 seccionTitulo">
			<div class="container px-4">
				<h2 class="fw-bold display-5 text-success-emphasis mb-3">
					<i class="fas fa-home me-2"></i>
					<span th:utext="#{page.guarderia.tittle}"></span>
				</h2>
				<p class="fs-5">
					<i class="fas fa-paw me-2 text-success"></i>
					<span th:utext="#{servicios.guarderia.eslogan1}"></span><br>
					<i class="fas fa-heart me-2 text-success"></i>
					<span th:utext="#{servicios.guarderia.eslogan2}"></span>
					<i class="fas fa-dog ms-2 me-1 text-success"></i>
					<i class="fas fa-cat me-1 text-success"></i>
				</p>
			</div>
		</section>
		<hr class="mx-auto w-100 border-2 opacity-50">

		<!-- Sección: Nuestras tarifas -->
		<section class="text-center mb-5">
			<h2 class="fw-bold text-success-emphasis mb-4">
				<i class="fas fa-paw me-2"></i>
				<span th:utext="#{servicios.guarderia.nuestrasTarifas}"></span>
			</h2>

			<div class="row row-cols-1 row-cols-md-3 g-4">
				<article class="col">
					<div class="card p-3 shadow-sm cardServicio">
						<div class="card_image">
							<img th:src="@{images/estanciaExpres.png}" alt="LogoEstanciaExpress" class="imagenCard">
						</div>
						<h3 class="card-title mt-3 fs-4 fw-bold text-success-emphasis"
							th:utext="#{servicios.guarderia.estanciaExpress.titulo}"></h3>
						<p class="fw-bold fs-5 mb-1" th:utext="#{servicios.guarderia.estanciaExpress.precio}"></p>
						<p th:utext="#{servicios.guarderia.estanciaExpress.duracion}"></p>
						<ul class="list-unstyled">
							<li><i class="fas fa-bone me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeComida}"></span>
							</li>
							<li><i class="fas fa-bed me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeAlojamiento}"></span>
							</li>
							<li><i class="fas fa-futbol me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeEntretenimiento}"></span>
							</li>
						</ul>
						<button class="btn btn-success btnCard" id="btnEstanciaExpress"
								th:utext="#{servicios.botonSeleccionar}">
						</button>
					</div>
				</article>
				<article class="col">
					<div class="card p-3 shadow-sm cardServicio">
						<div class="card_image">
							<img th:src="@{images/estanciaRelax.jpg}" alt="LogoEstanciaRelax" class="imagenCard">
						</div>
						<h3 class="card-title mt-3 fs-4 fw-bold text-success-emphasis"
							th:utext="#{servicios.guarderia.estanciaRelax.titulo}"></h3>
						<p class="fw-bold fs-5 mb-1" th:utext="#{servicios.guarderia.estanciaRelax.precio}"></p>
						<p th:utext="#{servicios.guarderia.estanciaRelax.duracion}"></p>
						<ul class="list-unstyled">
							<li><i class="fas fa-bone me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeComida}"></span>
							</li>
							<li><i class="fas fa-bed me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeAlojamiento}"></span>
							</li>
							<li><i class="fas fa-futbol me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeEntretenimiento}"></span>
							</li>
						</ul>
						<button class="btn btn-success btnCard" id="btnEstanciaRelax"
								th:utext="#{servicios.botonSeleccionar}">
						</button>
					</div>
				</article>
				<article class="col">
					<div class="card p-3 shadow-sm cardServicio">
						<div class="card_image">
							<img th:src="@{images/estanciaSabatica.jpg}" alt="LogoEstanciaSabatica" class="imagenCard">
						</div>
						<h3 class="card-title mt-3 fs-4 fw-bold text-success-emphasis"
							th:utext="#{servicios.guarderia.estanciaSabatica.titulo}"></h3>
						<p class="fw-bold fs-5 mb-1" th:utext="#{servicios.guarderia.estanciaSabatica.precio}"></p>
						<p th:utext="#{servicios.guarderia.estanciaSabatica.duracion}"></p>
						<ul class="list-unstyled">
							<li><i class="fas fa-bone me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeComida}"></span>
							</li>
							<li><i class="fas fa-bed me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeAlojamiento}"></span>
							</li>
							<li><i class="fas fa-futbol me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeEntretenimiento}"></span>
							</li>
						</ul>
						<button class="btn btn-success btnCard" id="btnEstanciaSabatica"
								th:utext="#{servicios.botonSeleccionar}">
						</button>
					</div>
				</article>
			</div>
		</section>
		<hr class="mx-auto w-100 border-2 opacity-50">

		<!-- Sección: Descubre nuestros bonos -->
		<section class="text-center mb-5">
			<h2 class="fw-bold text-success-emphasis mb-4">
				<i class="fas fa-gift me-2"></i>
				<span th:utext="#{servicios.guarderia.descubreBonos}"></span>
			</h2>

			<div class="row g-4 d-flex justify-content-center">
				<article class="col-6 col-md-4">
					<div class="card p-3 shadow-sm cardServicio">
						<div class="card_image">
							<img th:src="@{images/bonoLargaEstancia.jpg}" alt="BonoLargaEstancia" class="imagenCard">
						</div>
						<h3 class="card-title mt-3 fs-4 fw-bold text-success-emphasis"
							th:utext="#{servicios.guarderia.bonoLargaEstancia.titulo}"></h3>
						<p class="fw-bold fs-5 mb-1" th:utext="#{servicios.guarderia.bonoLargaEstancia.precio}"></p>
						<p th:utext="#{servicios.guarderia.bonoLargaEstancia.duracion}"></p>
						<ul class="list-unstyled">
							<li><i class="fas fa-bone me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeComida}"></span>
							</li>
							<li><i class="fas fa-bed me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeAlojamiento}"></span>
							</li>
							<li><i class="fas fa-futbol me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeEntretenimiento}"></span>
							</li>
						</ul>
						<p th:utext="#{servicios.guarderia.elegirDias}"></p>
						<button class="btn btn-success btnCard" id="btnBonoLargaEstancia"
								th:utext="#{servicios.botonSeleccionar}">
						</button>
					</div>
				</article>
				<article class="col-6 col-md-4">
					<div class="card p-3 shadow-sm cardServicio">
						<div class="card_image">
							<img th:src="@{images/bonoSoloDia.jpg}" alt="BonoSoloDia" class="imagenCard">
						</div>
						<h3 class="card-title mt-3 fs-4 fw-bold text-success-emphasis"
							th:utext="#{servicios.guarderia.bonoSoloDia.titulo}"></h3>
						<p class="fw-bold fs-5 mb-1" th:utext="#{servicios.guarderia.bonoSoloDia.precio}"></p>
						<p th:utext="#{servicios.guarderia.bonoSoloDia.duracion}"></p>
						<ul class="list-unstyled">
							<li><i class="fas fa-bone me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeComida}"></span>
							</li>
							<li><i class="fas fa-bed me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeAlojamiento}"></span>
							</li>
							<li><i class="fas fa-futbol me-2 text-success"></i>
								<span th:utext="#{servicios.guarderia.incluyeEntretenimiento}"></span>
							</li>
						</ul>
						<p th:utext="#{servicios.guarderia.elegirDias}"></p>
						<button class="btn btn-success btnCard" id="btnBonoEstanciaSoloDia"
								th:utext="#{servicios.botonSeleccionar}">
						</button>
					</div>
				</article>
			</div>
		</section>
		<hr class="mx-auto w-100 border-2 opacity-50">

		<!-- Sección: Formulario de contacto -->
		<section class="mb-5">
			<h2 class="text-success-emphasis fw-bold display-5 my-4 text-center"
				th:utext="#{servicios.reservaEstancia}"></h2>
			<div class="formContainer">
				<form class="row g-3">
					<fieldset class="col-md-6">
						<div class="itemSeleccion">
							<legend class="fw-bold">Datos de la mascota</legend>
							<label for="nombreMascota" class="form-label">Nombre de la mascota: <span
									style="color: red">*</span></label>
							<input type="text" id="nombreMascota" class="form-control labelForm"
								   placeholder="-Por favor introduce el nombre de tu mascota-" required>
						</div>

						<div class="itemSeleccion">
							<label for="caracterMascota" class="form-label">Caracter social: <span
									style="color: red">*</span></label>
							<select id="caracterMascota" class="form-select labelForm" required>
								<option value="" disabled selected>-Por favor, elige una opción-</option>
								<option>Sociable</option>
								<option>No sociable</option>
							</select>
						</div>

						<div class="itemSeleccion">
							<label for="tipoMascota" class="form-label">Tipo: <span style="color: red">*</span></label>
							<select id="tipoMascota" class="form-select labelForm" required>
								<option value="" disabled selected>-Por favor, elige una opción-</option>
								<option>Perro</option>
								<option>Gato</option>
								<option>Otro</option>
							</select>
						</div>

						<div class="itemSeleccion">
							<label for="necesitaMedicacion" class="form-label">Necesita medicación: <span
									style="color: red">*</span></label>
							<select id="necesitaMedicacion" class="form-select labelForm" required>
								<option value="" disabled selected>-Por favor, elige una opción-</option>
								<option>Sí</option>
								<option>No</option>
							</select>
						</div>

						<div class="itemSeleccion">
							<label for="fechaEntrada" class="form-label">Fecha de entrada: <span
									style="color: red">*</span></label>
							<input type="date" id="fechaEntrada" class="form-control labelForm" required>
						</div>

						<div class="itemSeleccion">
							<label for="fechaSalida" class="form-label">Fecha de salida: <span
									style="color: red">*</span></label>
							<input type="date" id="fechaSalida" class="form-control labelForm" required>
						</div>
					</fieldset>

					<fieldset class="col-md-6">
						<div class="itemSeleccion">
							<legend class="fw-bold">Datos de contacto</legend>
							<label for="nombreDueño" class="form-label">Tu nombre: <span
									style="color: red">*</span></label>
							<input type="text" id="nombreDueño" class="form-control labelForm"
								   placeholder="-Por favor introduce tu nombre-" required>
						</div>

						<div class="itemSeleccion">
							<label for="telefonoDueño" class="form-label">Teléfono: <span
									style="color: red">*</span></label>
							<input type="tel" id="telefonoDueño" class="form-control labelForm"
								   placeholder="-Por favor introduce tu número de teléfono-" required>
						</div>

						<div class="itemSeleccion">
							<label for="emailDueño" class="form-label">Correo electrónico: <span
									style="color: red">*</span></label>
							<input type="email" id="emailDueño" class="form-control labelForm"
								   placeholder="-Por favor introduce tu correo electrónico-" required>
						</div>

						<div class="itemSeleccion">
							<label for="mensajeExtra" class="form-label">Mensaje:</label>
							<input type="text" id="mensajeExtra" class="form-control labelForm">
						</div>
					</fieldset>

					<div class="itemSeleccion">
						<label class="form-label fw-bold fs-5">Tarifa seleccionada: </label>
					</div>

					<div class="itemSeleccion">
						<label class="form-label fw-bold fs-3" id="precioTotal">PRECIO TOTAL: </label>
					</div>

					<div class="itemSeleccion">
						<input type="checkbox" class="" required>
						<label class="form-label">He leído y acepto las condiciones de uso de la web,
							el aviso legal y la política de privacidad</label>
					</div>

					<div class="text-center">
						<button type="submit" class="btn btn-primary btnEnviar">RESERVAR</button>
					</div>
				</form>
			</div>
		</section>
		<hr class="mx-auto w-100 border-2 opacity-50">

		<!-- Sección: otros servicios-->
		<section class="text-center mb-1">
			<h2 class="text-success-emphasis fw-bold display-5 my-4"
				th:utext="#{servicios.otrosServicios}"></h2>
			<div class="row row-cols-1 row-cols-md-4 g-4">
				<article class="col">
					<div class="card p-3 shadow-sm cardServicio">
						<div class="card_image">
							<img th:src="@{images/peluqueriaCanina.jpg}" alt="LogoPeluqueria" class="imagenCard">
						</div>
						<h3 class="mt-3 fs-3 fw-bold text-success-emphasis"
							th:utext="#{servicios.peluqueria}"></h3>
						<p class="fs-4" th:utext="#{servicios.peluqueriaApartirDe}"></p>
						<a th:href="@{/peluqueria}" class="btn btn-success"
						   th:utext="#{servicios.masInfo}">
						</a>
					</div>
				</article>
				<article class="col">
					<div class="card p-3 shadow-sm cardServicio">
						<div class="card_image">
							<img th:src="@{images/adiestramiento.jpg}" alt="LogoAdiestramiento" class="imagenCard">
						</div>
						<h3 class="mt-3 fs-3 fw-bold text-success-emphasis"
							th:utext="#{servicios.adiestramiento}"></h3>
						<p class="fs-4" th:utext="#{servicios.adiestramientoApartirDe}"></p>
						<a th:href="@{/adiestramiento}" class="btn btn-success"
						   th:utext="#{servicios.masInfo}">
						</a>
					</div>
				</article>
				<article class="col">
					<div class="card p-3 shadow-sm cardServicio">
						<div class="card_image">
							<img th:src="@{images/veterinario.jpg}" alt="LogoVeterinario" class="imagenCard">
						</div>
						<h3 class="mt-3 fs-3 fw-bold text-success-emphasis"
							th:utext="#{servicios.veterinario}"></h3>
						<p class="fs-4" th:utext="#{servicios.veterinarioApartirDe}"></p>
						<a th:href="@{/veterinario}" class="btn btn-success"
						   th:utext="#{servicios.masInfo}">
						</a>
					</div>
				</article>
				<article class="col">
					<div class="card p-3 shadow-sm cardServicio">
						<div class="card_image">
							<img th:src="@{images/asesoramientoLegal.jpg}" alt="LogoLegal" class="imagenCard">
						</div>
						<h3 class="mt-3 fs-3 fw-bold text-success-emphasis"
							th:utext="#{servicios.asesoramientoLegal}"></h3>
						<p class="fs-4" th:utext="#{servicios.asesoramientoApartirDe}"></p>
						<a th:href="@{/asesoramientoLegal}" class="btn btn-success"
						   th:utext="#{servicios.masInfo}">
						</a>
					</div>
				</article>
			</div>
		</section>
	</section>

	<!-- Script para controlar la seleccion de fechas -->
	<script>
        'use strict';
        var dclhandler = false;
        if (document.readyState !== 'loading') {
            start();
        } else {
            dclhandler = true;
            document.addEventListener('DOMContentLoaded', start);
        }

        function start() {
            if (dclhandler) {
                document.removeEventListener('DOMContentLoaded', start);
            }
            console.log('Start the site`s JS activities');
        }

        document.addEventListener('DOMContentLoaded', function () {
            const fechaEntrada = document.getElementById('fechaEntrada');
            const fechaSalida = document.getElementById('fechaSalida');


            // Obtener la fecha actual en formato YYYY-MM-DD
            const hoy = new Date().toISOString().split('T')[0];

            // Establecer el valor mínimo para la fecha de entrada
            fechaEntrada.min = hoy;

            // Evento para actualizar la fecha mínima de salida cuando cambia la entrada
            fechaEntrada.addEventListener('change', function () {
                fechaSalida.min = fechaEntrada.value;
            });
        });
	</script>

	<!-- Script para calcular el precio dependiendo de la tarifa seleccionada -->
	<script>
        document.addEventListener('DOMContentLoaded', function () {
            const tarifas = {
                "ESTANCIA EXPRESS": 18,
                "ESTANCIA RELAX": 15,
                "ESTANCIA SABÁTICA": 12,
                "BONO LARGA ESTANCIA": 200,
                "BONO ESTANCIA SOLO DIA": 75
            };

            let tarifaSeleccionada = "";
            let precioPorNoche = 0;

            const etiquetaTarifa = document.querySelector('.fw-bold.fs-5'); // Donde se mostrará la tarifa
            const etiquetaPrecioTotal = document.getElementById('precioTotal');

            // Botones de selección de tarifa
            document.getElementById('btnEstanciaExpress').addEventListener('click', function () {
                seleccionarTarifa("ESTANCIA EXPRESS");
            });

            document.getElementById('btnEstanciaRelax').addEventListener('click', function () {
                seleccionarTarifa("ESTANCIA RELAX");
            });

            document.getElementById('btnEstanciaSabatica').addEventListener('click', function () {
                seleccionarTarifa("ESTANCIA SABÁTICA");
            });

            document.getElementById('btnBonoLargaEstancia').addEventListener('click', function () {
                establecerTarifaFija("BONO LARGA ESTANCIA");
            });

            document.getElementById('btnBonoEstanciaSoloDia').addEventListener('click', function () {
                establecerTarifaFija("BONO ESTANCIA SOLO DIA");
            });

            function establecerTarifaFija(tarifa) {
                tarifaSeleccionada = tarifa;
                etiquetaTarifa.textContent = "Tarifa seleccionada: " + tarifa;
                const totalFijo = tarifas[tarifa];
                etiquetaPrecioTotal.textContent = `PRECIO TOTAL: ${totalFijo}€`;
            }

            function seleccionarTarifa(tarifa) {
                tarifaSeleccionada = tarifa;
                precioPorNoche = tarifas[tarifa];
                etiquetaTarifa.textContent = "Tarifa seleccionada: " + tarifa;
                calcularPrecio(); // Recalcular si ya hay fechas seleccionadas
            }

            // Función para calcular el precio total según las fechas
            function calcularPrecio() {
                const fechaEntrada = document.getElementById('fechaEntrada').value;
                const fechaSalida = document.getElementById('fechaSalida').value;

                if (fechaEntrada && fechaSalida && tarifaSeleccionada) {
                    const inicio = new Date(fechaEntrada);
                    const fin = new Date(fechaSalida);
                    const noches = Math.max((fin - inicio) / (1000 * 60 * 60 * 24), 0);

                    if (noches > 0) {
                        const total = noches * precioPorNoche;
                        etiquetaPrecioTotal.textContent = `PRECIO TOTAL: ${total}€`;
                    } else {
                        etiquetaPrecioTotal.textContent = "PRECIO TOTAL: ";
                    }
                }
            }

            // Detectar cambios en las fechas y calcular precio
            document.getElementById('fechaEntrada').addEventListener('change', calcularPrecio);
            document.getElementById('fechaSalida').addEventListener('change', calcularPrecio);
        });
	</script>
</section>
</body>
</html>